(function(e){function t(t){for(var s,i,r=t[0],l=t[1],c=t[2],d=0,p=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],s=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(s=!1)}s&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var s={},o={app:0},a=[];function i(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var s=n("85ec"),o=n.n(s);o.a},"058d":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("4de4"),n("7db0"),n("4160"),n("d3b7"),n("4c53"),n("159b"),n("96cf");var s=n("1da1"),o=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),a=n("5c96"),i=n.n(a),r=(n("0fae"),n("b2d6")),l=n.n(r),c=n("651e"),u=n.n(c),d=n("2f62"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("el-container",[n("el-aside",{attrs:{width:"200px"}},[n("h1",[n("span",{staticStyle:{"letter-spacing":"-3px",opacity:"0.6"}},[e._v("ez")]),e._v("BIDS")]),n("themenu",{model:{value:e.$root.page,callback:function(t){e.$set(e.$root,"page",t)},expression:"$root.page"}})],1),n("el-main",[n("upload",{directives:[{name:"show",rawName:"v-show",value:"upload"==e.$root.page,expression:"$root.page == 'upload'"}]}),n("description",{directives:[{name:"show",rawName:"v-show",value:"description"==e.$root.page,expression:"$root.page == 'description'"}]}),n("subjects",{directives:[{name:"show",rawName:"v-show",value:"subjects"==e.$root.page,expression:"$root.page == 'subjects'"}]}),n("sessions",{directives:[{name:"show",rawName:"v-show",value:"sessions"==e.$root.page,expression:"$root.page == 'sessions'"}]}),n("series",{directives:[{name:"show",rawName:"v-show",value:"series"==e.$root.page,expression:"$root.page == 'series'"}]}),n("participants",{directives:[{name:"show",rawName:"v-show",value:"participants"==e.$root.page,expression:"$root.page == 'participants'"}]}),n("objects",{directives:[{name:"show",rawName:"v-show",value:"objects"==e.$root.page,expression:"$root.page == 'objects'"}]}),n("finalize",{directives:[{name:"show",rawName:"v-show",value:"finalize"==e.$root.page,expression:"$root.page == 'finalize'"}]})],1)],1)],1)},f=[],h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-menu",{attrs:{"default-active":e.value},on:{select:e.handleSelect}},[n("el-menu-item",{attrs:{index:"upload"}},[e._v("Upload")]),n("el-menu-item",{attrs:{index:"description",disabled:!e.$root.session}},[e._v("Description / README")]),n("el-menu-item",{attrs:{index:"subjects",disabled:!e.$root.analyzed}},[e._v("Subjects")]),n("el-menu-item",{attrs:{index:"sessions",disabled:!e.$root.analyzed}},[e._v("Sessions")]),n("el-menu-item",{attrs:{index:"series",disabled:!e.$root.analyzed}},[e._v("Series")]),n("el-menu-item",{attrs:{index:"participants",disabled:!e.$root.analyzed}},[e._v("Participants")]),n("el-menu-item",{attrs:{index:"objects",disabled:!e.$root.analyzed}},[e._v("BIDS Structure")]),n("el-menu-item",{attrs:{index:"finalize",disabled:!e.$root.validated}},[e._v("Finalize")])],1)],1)},m=[],b={props:["value"],data:function(){return{}},methods:{handleSelect:function(e){this.$emit("input",e)}},created:function(){}},v=b,g=n("2877"),_=Object(g["a"])(v,h,m,!1,null,null,null),y=_.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.$root.session?e._e():n("div",[e._m(0),n("div",{staticClass:"drop-area",class:{dragging:e.dragging},on:{drop:e.dropit,dragleave:function(t){e.dragging=!1},dragover:e.dragover}},[n("center",{staticClass:"drop-area-backdrop"},[n("b",[n("span",{staticStyle:{"letter-spacing":"-4vh"}},[e._v("ez")]),e._v("BIDS")])]),n("b",[e._v("Drag & Drop a DICOM folder here")]),n("br"),n("br"),e._v(" or "),n("input",{attrs:{type:"file",webkitdirectory:"",mozdirectory:"",msdirectory:"",odirectory:"",directory:"",multiple:""},on:{change:e.selectit}})],1)]),e.$root.session?n("div",["created"==e.$root.session.status?n("div",[n("h3",[e._v("Uploading ...")]),n("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:parseFloat((e.uploaded.length/e.files.length*100).toFixed(1)),status:"success"}}),n("div",{staticClass:"stats"},[n("p",[n("small",[e._v("Total size "+e._s(e._f("formatNumber")(e.total_size/1048576))+" MB")]),n("small",[e._v(" | "+e._s(e.files.length)+" Files ")])]),n("ul",e._l(e.uploading,(function(t){return n("li",{key:t},[n("small",[e._v(e._s(t)+".")]),e._v(" "+e._s(e.files[t].path)+" ("+e._s(e.loadedPercentage(t))+"%) retry:"+e._s(e.files[t].retry)+" ")])})),0)])],1):n("processStatus")],1):e._e()])},x=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v(" Welcome to the "),n("b",[n("span",{staticStyle:{"letter-spacing":"-2px",opacity:"0.5"}},[e._v("ez")]),e._v("BIDS")]),e._v(". This App will guide you through the process of converting your DICOM images into a BIDS dataset. ")])}],k=(n("caad"),n("c975"),n("a434"),n("b0c0"),n("b680"),n("2532"),n("2909")),$=n("b85c"),S=n("bc3a"),j=n.n(S),D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.$root.session?n("div",["uploaded"==e.$root.session.status?n("div",[n("p",[e._v("Waiting to be analyzed...")])]):e._e(),"preprocessing"==e.$root.session.status?n("div",[n("p",[e._v("Analyzing...")]),n("p",[n("small",[e._v(e._s(e.$root.session.status_msg))])])]):e._e(),"analyzed"==e.$root.session.status?n("div",[n("p",[e._v("Analysis complete! Please proceed to the next tab.")]),n("p")]):e._e(),"failed"==e.$root.session.status?n("div",[n("p",[e._v("Analysis has failed.. Please check the log and/or contact ezBIDS team.")]),n("p",[e._v(e._s(e.$root.session.status_msg))])]):e._e(),"finalized"==e.$root.session.status?n("div",[n("p",[e._v("Waiting to be converted to BIDS...")])]):e._e(),"bidsing"==e.$root.session.status?n("div",[n("p",[e._v("Being Converted to BIDS...")])]):e._e(),"finished"==e.$root.session.status?n("div",[n("p",[e._v("All done!")])]):e._e(),n("p",[n("el-button",{attrs:{type:"secondary",size:"small"},on:{click:function(t){return e.$root.reset()}}},[e._v("Re-upload")])],1),n("el-collapse",{on:{change:e.logChange},model:{value:e.activeLogs,callback:function(t){e.activeLogs=t},expression:"activeLogs"}},[n("el-collapse-item",{attrs:{title:"Log",name:"out"}},[n("pre",{staticClass:"text"},[e._v(e._s(e.out))])]),n("el-collapse-item",{attrs:{title:"Error Log",name:"err"}},[n("pre",{staticClass:"text"},[e._v(e._s(e.err))])]),"analyzed"==e.$root.session.status?n("el-collapse-item",{attrs:{title:"Objects",name:"list"}},[n("pre",{staticClass:"text"},[e._v(e._s(e.list))])]):e._e()],1)],1):e._e()])},z=[],I={components:{},data:function(){return{err:"",out:"",list:"",activeLogs:[]}},created:function(){},methods:{logChange:function(){var e=this;this.activeLogs.includes("out")?this.out||fetch(this.$root.apihost+"/session/"+this.$root.session._id+"/log").then((function(e){return e.text()})).then((function(t){e.out=t})):this.out="",this.activeLogs.includes("err")?this.err||fetch(this.$root.apihost+"/session/"+this.$root.session._id+"/error").then((function(e){return e.text()})).then((function(t){e.err=t})):this.err="",this.activeLogs.includes("list")?this.list||fetch(this.$root.apihost+"/session/"+this.$root.session._id+"/list").then((function(e){return e.text()})).then((function(t){e.list=t})):this.list=""}}},O=I,A=(n("df1c"),Object(g["a"])(O,D,z,!1,null,"cc8f5832",null)),C=A.exports,E={components:{processStatus:C},data:function(){return{dragging:!1,total_size:null,files:[],reload_t:null,uploading:[],uploaded:[],doneUploading:!1}},mounted:function(){console.log("upload mounted..")},created:function(){console.log("upload created..")},destroyed:function(){},methods:{dragover:function(e){e.preventDefault(),this.dragging=!0},dropit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.preventDefault(),t.dragging=!1,n.next=4,t.listDropFiles(e.dataTransfer.items);case 4:t.upload();case 5:case"end":return n.stop()}}),n)})))()},selectit:function(e){this.files=e.target.files;var t,n=Object($["a"])(e.target.files);try{for(n.s();!(t=n.n()).done;){var s=t.value;s.path=s.webkitRelativePath}}catch(o){n.e(o)}finally{n.f()}this.upload()},listDropFiles:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var o,a,i,r,l,c,u,d,p,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(c=function(){return c=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,n){return t.file(e,n)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e["catch"](0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),c.apply(this,arguments)},l=function(e){return c.apply(this,arguments)},r=function(){return r=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,n){t.readEntries(e,n)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e["catch"](0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),r.apply(this,arguments)},i=function(e){return r.apply(this,arguments)},a=function(){return a=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[],e.next=3,i(t);case 3:s=e.sent;case 4:if(!(s.length>0)){e.next=11;break}return n.push.apply(n,Object(k["a"])(s)),e.next=8,i(t);case 8:s=e.sent,e.next=4;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)},o=function(e){return a.apply(this,arguments)},t.files=[],u=[],d=0;d<e.length;d++)u.push(e[d].webkitGetAsEntry());case 9:if(!(u.length>0)){n.next=30;break}if(p=u.shift(),!p.isFile){n.next=19;break}return n.next=14,l(p);case 14:f=n.sent,f.path=p.fullPath.substring(1),t.files.push(f),n.next=28;break;case 19:if(!p.isDirectory){n.next=28;break}return n.t0=u.push,n.t1=u,n.t2=k["a"],n.next=25,o(p.createReader());case 25:n.t3=n.sent,n.t4=(0,n.t2)(n.t3),n.t0.apply.call(n.t0,n.t1,n.t4);case 28:n.next=9;break;case 30:case"end":return n.stop()}}),n)})))()},upload:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,s,o,a,i,r,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e.$root.analyzed=!1,e.$root.validated=!1,clearTimeout(e.reload_t),e.doneUploading=!1,e.total_size=0,n=0;n<e.files.length;++n)s=e.files[n],e.total_size+=s.size;for(o={files:[]},a=0;a<e.files.length;++a)i=e.files[a],o.files.push({idx:a,name:i.name,size:i.size,path:i.path});return t.next=10,fetch(e.$root.apihost+"/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 10:return r=t.sent,t.next=13,r.json();case 13:for(e.$root.session=t.sent,l=0;l<e.files.length;++l)c=e.files[l],c.retry=0,c.loaded=0;e.process_files();case 16:case"end":return t.stop()}}),t)})))()},process_files:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,s,o,a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.uploaded.length!=e.files.length){t.next=2;break}return t.abrupt("return",e.done_uploading());case 2:if(!(e.uploading.length>3)){t.next=4;break}return t.abrupt("return");case 4:o=0;case 5:if(!(o<e.files.length)){t.next=16;break}if(!e.uploaded.includes(o)){t.next=8;break}return t.abrupt("continue",13);case 8:if(!e.uploading.includes(o)){t.next=10;break}return t.abrupt("continue",13);case 10:return n=e.files[o],s=o,t.abrupt("break",16);case 13:++o,t.next=5;break;case 16:if(n){t.next=18;break}return t.abrupt("return");case 18:if(e.uploading.push(s),3!=n.retry){t.next=22;break}return e.$root.uploadFailed=!0,t.abrupt("return");case 22:return t.prev=22,a=new FormData,a.append("file",n),t.next=27,j.a.post(e.$root.apihost+"/upload/"+e.$root.session._id+"/"+s,a,{onUploadProgress:function(e){n.loaded=e.loaded}});case 27:e.uploaded.push(s),i=e.uploading.indexOf(s),e.uploading.splice(i,1),e.process_files(),t.next=40;break;case 33:t.prev=33,t.t0=t["catch"](22),console.error(t.t0),n.retry++,r=e.uploading.indexOf(s),e.uploading.splice(r,1),setTimeout(e.process_files,5e3);case 40:e.process_files();case 41:case"end":return t.stop()}}),t,null,[[22,33]])})))()},done_uploading:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.doneUploading){t.next=2;break}return t.abrupt("return");case 2:return e.doneUploading=!0,t.next=5,fetch(e.$root.apihost+"/session/uploaded/"+e.$root.session._id,{method:"PATCH",headers:{"Content-Type":"application/json"}});case 5:console.log("done uploading --------- start polling"),e.pollSession();case 7:case"end":return t.stop()}}),t)})))()},pollSession:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("polling..",e.$root.session.status),t.next=3,fetch(e.$root.apihost+"/session/"+e.$root.session._id,{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return n=t.sent,t.next=6,n.json();case 6:e.$root.session=t.sent,t.t0=e.$root.session.status,t.next="created"===t.t0||"uploaded"===t.t0||"preprocessing"===t.t0?10:"analyzed"===t.t0?12:"failed"===t.t0?17:18;break;case 10:return e.reload_t=setTimeout((function(){console.log("will reload"),e.pollSession()}),1e3),t.abrupt("break",18);case 12:if(e.$root.analyzed){t.next=16;break}return t.next=15,e.$root.loadData(e.$root.apihost+"/session/"+e.$root.session._id+"/ezbids");case 15:e.$root.analyzed=!0;case 16:return t.abrupt("break",18);case 17:return t.abrupt("break",18);case 18:case"end":return t.stop()}}),t)})))()},loadedPercentage:function(e){var t=this.files[e];return(t.loaded/t.size*100).toFixed(1)}}},P=E,R=(n("9786"),Object(g["a"])(P,w,x,!1,null,"1c4f08e7",null)),N=R.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v('A BIDS dataset requires "dataset description". Please populate the following information as much as possible.')]),n("br"),n("el-form",{attrs:{"label-width":"150px"}},[n("h4",{staticStyle:{"margin-left":"150px"}},[e._v("Dataset Description")]),n("el-form-item",{attrs:{label:"Dataset Name"}},[n("el-input",{attrs:{required:""},model:{value:e.dd.Name,callback:function(t){e.$set(e.dd,"Name",t)},expression:"dd.Name"}})],1),n("el-form-item",{attrs:{label:"BIDSVersion"}},[n("el-input",{attrs:{required:"",disabled:""},model:{value:e.dd.BIDSVersion,callback:function(t){e.$set(e.dd,"BIDSVersion",t)},expression:"dd.BIDSVersion"}})],1),n("el-form-item",{attrs:{label:"License"}},[n("el-input",{model:{value:e.dd.License,callback:function(t){e.$set(e.dd,"License",t)},expression:"dd.License"}})],1),n("el-form-item",{attrs:{label:"Authors"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"Enter Author Names"},model:{value:e.dd.Authors,callback:function(t){e.$set(e.dd,"Authors",t)},expression:"dd.Authors"}})],1),n("el-form-item",{attrs:{label:"Acknowledgements"}},[n("el-input",{attrs:{type:"textarea",placeholder:"Any acknowledgements you'd like to add..",autosize:{minRows:2,maxRows:6}},model:{value:e.dd.Acknowledgements,callback:function(t){e.$set(e.dd,"Acknowledgements",t)},expression:"dd.Acknowledgements"}})],1),n("el-form-item",{attrs:{label:"How To Acknowledge"}},[n("el-input",{attrs:{type:"textarea",placeholder:"Enter how you want your users to acknowlege when they use this dataset",autosize:{minRows:2,maxRows:6}},model:{value:e.dd.HowToAcknowledge,callback:function(t){e.$set(e.dd,"HowToAcknowledge",t)},expression:"dd.HowToAcknowledge"}})],1),n("el-form-item",{attrs:{label:"Funding Sources"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"Funding sources"},model:{value:e.dd.Funding,callback:function(t){e.$set(e.dd,"Funding",t)},expression:"dd.Funding"}})],1),n("el-form-item",{attrs:{label:"References and Links"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"Add any references / citations / links"},model:{value:e.dd.ReferencesAndLinks,callback:function(t){e.$set(e.dd,"ReferencesAndLinks",t)},expression:"dd.ReferencesAndLinks"}})],1),n("el-form-item",{attrs:{label:"Dataset DOI"}},[n("el-input",{attrs:{placeholder:"DOI assigned for this dataset"},model:{value:e.dd.DatasetDOI,callback:function(t){e.$set(e.dd,"DatasetDOI",t)},expression:"dd.DatasetDOI"}})],1),n("p",{staticStyle:{"border-top":"1px solid #0002"}}),n("el-form-item",{attrs:{label:"README(.md)"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:20,maxRows:25}},model:{value:e.readme,callback:function(t){e.readme=t},expression:"readme"}})],1)],1)],1)},q=[],B={computed:{dd:function(){return this.$root.datasetDescription},readme:{get:function(){return this.$root.readme},set:function(e){this.$root.readme=e}}},components:{},data:function(){return{}},created:function(){},methods:{}},L=B,F=Object(g["a"])(L,T,q,!1,null,"1dd56a56",null),M=F.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("Please decide how you'd like to map DICOM PatientID to BIDS Subject IDs. You can download the mapping table later.")]),n("br"),n("el-dropdown",{staticStyle:{float:"right"},attrs:{size:"small"},on:{command:e.resetSubjects}},[n("el-button",{attrs:{type:"primary"}},[e._v(" Reset Mapping "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"pid"}},[e._v("Use PatientID")]),n("el-dropdown-item",{attrs:{command:"num"}},[e._v("Numerical (1,2,3..)")])],1)],1),n("h4",[e._v("Patient/Subject Mappings")]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.$root.subjects,size:"mini"}},[n("el-table-column",{attrs:{label:"DICOM PatientID"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-right",staticStyle:{float:"right"}}),e._v(" "+e._s(t.row.PatientID)+" ")]}}])}),n("el-table-column",{attrs:{label:"BIDS Subject ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{size:"small"},model:{value:t.row.sub,callback:function(n){e.$set(t.row,"sub",n)},expression:"scope.row.sub"}},[n("template",{slot:"prepend"},[e._v("sub-")])],2)]}}])})],1)],1)},U=[],W=(n("25f0"),{data:function(){return{}},watch:{"$root.subjects":function(e,t){console.log("subjects updated.. initializing keys"),0!=e.length&&0==t.length&&this.resetSubjects("pid")}},created:function(){},methods:{resetSubjects:function(e){var t=1;switch(e){case"num":this.$root.subjects.forEach((function(e){e.sub=t.toString(),t++}));break;case"pid":this.$root.subjects.forEach((function(e){e.sub=e.PatientID}));break}}}}),V=W,G=Object(g["a"])(V,H,U,!1,null,"2e328f0a",null),Y=G.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("Please decide how you'd like to map DICOM PatientID to BIDS Subject IDs. You can download the mapping table later.")]),n("br"),n("el-dropdown",{staticStyle:{float:"right"},attrs:{size:"small"},on:{command:e.resetSessions}},[n("el-button",{attrs:{type:"primary"}},[e._v(" Reset Mapping "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"empty"}},[e._v("Leave them empty")]),n("el-dropdown-item",{attrs:{command:"date"}},[e._v("Use AcquisitionDates")]),n("el-dropdown-item",{attrs:{command:"num"}},[e._v("Numerical (1,2,3..)")]),n("el-dropdown-item",{attrs:{command:"same"}},[e._v("Set all to the same ID ...")])],1)],1),n("h4",[e._v("AcquisitionDate/Session Mappings")]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.$root.sessions,size:"mini"}},[n("el-table-column",{attrs:{label:"DICOM AcquisitionDate"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-right",staticStyle:{float:"right"}}),e._v(" "+e._s(t.row.AcquisitionDate)+" ")]}}])}),n("el-table-column",{attrs:{label:"BIDS Session ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{placeholder:"no session",size:"small"},model:{value:t.row.ses,callback:function(n){e.$set(t.row,"ses",n)},expression:"scope.row.ses"}},[n("template",{slot:"prepend"},[e._v("ses-")])],2)]}}])})],1)],1)},K=[],Z={data:function(){return{}},watch:{"$root.sessions":function(e,t){console.log("session updated.. initializing keys"),0!=e.length&&0==t.length&&this.resetSessions("empty")}},created:function(){},methods:{resetSessions:function(e){var t,n=1;switch(e){case"empty":this.$root.sessions.forEach((function(e){e.ses=""}));break;case"date":this.$root.sessions.forEach((function(e){e.ses=e.AcquisitionDate}));break;case"num":this.$root.sessions.forEach((function(e){e.ses=n.toString(),n++}));break;case"same":t=prompt("Please enter session ID to set"),this.$root.sessions.forEach((function(e){e.ses=t,n++}));break}}}},Q=Z,X=Object(g["a"])(Q,J,K,!1,null,"d6471f28",null),ee=X.exports,te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("Please decide how to map Acquisition Date to BIDS series ID. You can leave it blank if your study does not consists of multiple sessions.")]),n("el-table",{staticClass:"series-table",staticStyle:{width:"100%"},attrs:{data:e.$root.series,size:"mini"}},[n("el-table-column",{attrs:{label:"Include",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{title:"Include this series in the BIDS output"},model:{value:t.row.include,callback:function(n){e.$set(t.row,"include",n)},expression:"scope.row.include"}})]}}])}),n("el-table-column",{attrs:{label:"Series Description (id)",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-right",staticStyle:{float:"right"}}),e._v(" "+e._s(t.row.SeriesDescription)+" "),n("el-tag",{attrs:{type:"info",size:"mini"}},[n("small",[e._v(e._s(t.row.SeriesNumber))])])]}}])}),n("el-table-column",{attrs:{label:"BIDS Datatype",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Modality",size:"small"},model:{value:t.row.type,callback:function(n){e.$set(t.row,"type",n)},expression:"scope.row.type"}},e._l(e.$root.datatypes,(function(t){return n("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,(function(s){return n("el-option",{key:s.value,attrs:{value:s.value}},[e._v(" "+e._s(t.label)+" / "+e._s(s.label)+" ")])})),1)})),1)]}}])}),n("el-table-column",{attrs:{label:"Entities"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.type.startsWith("func/")?n("div",[n("el-input",{attrs:{size:"small",required:""},model:{value:t.row.labels.task,callback:function(n){e.$set(t.row.labels,"task",n)},expression:"scope.row.labels.task"}},[n("template",{slot:"prepend"},[e._v("Task Name")])],2)],1):e._e()]}}])})],1)],1)},ne=[],se={data:function(){return{}},watch:{},created:function(){},methods:{}},oe=se,ae=(n("fc4d"),Object(g["a"])(oe,te,ne,!1,null,"7a3fa9bb",null)),ie=ae.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("You can optionally store metadata/phenotypical data for each subject/participants on this datasets within your BIDS dataset.")]),n("p",[e._v("This information allows you to perform group analysis with your data, for example.")]),n("h4",[e._v("Phenotype Columns")]),n("p",[e._v("Define phenotypical keys stored for this study (optional).")]),e._l(e.$root.participantsColumn,(function(t,s){return n("div",{key:s,staticClass:"columnEditor"},[n("el-button",{staticStyle:{float:"right"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.remove(s)}}}),n("b",[e._v(e._s(s))]),n("br"),n("br",{attrs:{clear:"both"}}),n("el-form",{attrs:{"label-width":"100px",size:"mini"}},[n("el-form-item",{attrs:{label:"Long Name"}},[n("el-input",{attrs:{placeholder:"LongName",size:"mini"},model:{value:t.LongName,callback:function(n){e.$set(t,"LongName",n)},expression:"column.LongName"}})],1),n("el-form-item",{attrs:{label:"Units"}},[n("el-input",{attrs:{placeholder:"Units",size:"mini"},model:{value:t.Units,callback:function(n){e.$set(t,"Units",n)},expression:"column.Units"}})],1),n("el-form-item",{attrs:{label:"Description"}},[n("el-input",{attrs:{type:"textarea",placeholder:"Description",size:"mini"},model:{value:t.Description,callback:function(n){e.$set(t,"Description",n)},expression:"column.Description"}})],1),n("el-form-item",{attrs:{label:"Options"}},[n("small",[e._v("TODO.. (levels)")])])],1)],1)})),n("p",{staticClass:"columnEditor",staticStyle:{width:"200px"}},[n("el-input",{attrs:{placeholder:"Add New Column",size:"mini"},model:{value:e.newcolumn,callback:function(t){e.newcolumn=t},expression:"newcolumn"}},[n("el-button",{attrs:{slot:"append",type:"primary"},on:{click:e.addNewColumn},slot:"append"},[e._v("Add")])],1)],1),n("br",{attrs:{clear:"both"}}),n("h4",[e._v("phenotype.tsv")]),n("p",[e._v("Enter phenotypical data associated with each participants.")]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.$root.subjects,size:"mini"}},[n("el-table-column",{attrs:{label:"Subject",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.PatientID)),n("br"),n("small",[e._v(e._s(t.row.sub))])]}}])}),e._l(e.$root.participantsColumn,(function(t,s){return n("el-table-column",{key:s,attrs:{label:s},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{size:"mini"},model:{value:t.row.phenotype[s],callback:function(n){e.$set(t.row.phenotype,s,n)},expression:"scope.row.phenotype[key]"}})]}}],null,!0)})}))],2)],2)},le=[],ce={created:function(){},methods:{addNewColumn:function(){this.newcolumn&&(this.$set(this.$root.participantsColumn,this.newcolumn,{LongName:"",Description:"",Units:"",Levels:{}}),this.newcolumn="")},remove:function(e){console.log("removing",e),delete this.$root.participantsColumn[e],this.$forceUpdate()}},data:function(){return{newcolumn:""}}},ue=ce,de=(n("8e7d"),Object(g["a"])(ue,re,le,!1,null,"c9df0ce4",null)),pe=de.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"objects"},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:8}},[n("h4",[e._v("BIDS Structure")]),e._l(e.$root.subs,(function(t,s){return n("div",{key:s,staticStyle:{"font-size":"90%"}},[""!=s?n("span",{staticClass:"hierarchy",staticStyle:{opacity:"0.8"}},[n("i",{staticClass:"el-icon-user-solid"}),e._v(" "),n("small",[e._v("sub")]),e._v(" "+e._s(s)+" "),n("small",[e._v("("+e._s(t.objects.length)+")")])]):e._e(),e._l(t.sess,(function(t,o){return n("div",{key:o,class:{"left-border":""!=o}},[""!=o?n("span",{staticClass:"hierarchy",staticStyle:{opacity:"0.8"}},[n("i",{staticClass:"el-icon-time"}),e._v(" "),n("small",[e._v("ses")]),e._v(" "+e._s(o)+" ")]):e._e(),e._l(t.runs,(function(t,a){return n("div",{key:a,staticClass:"hierarchy"},[""!=a?n("span",{staticStyle:{opacity:"0.8","padding-left":"8px"}},[n("small",[e._v("run")]),e._v(" "+e._s(a)+" ")]):e._e(),n("div",{staticClass:"left-border clickable",class:{selected:e.selected===t.objects},on:{click:function(n){return e.select(t.objects,s,o,a)}}},e._l(t.objects,(function(t,s){return n("div",{key:s,staticStyle:{padding:"2px"}},[n("datatype",{attrs:{o:t}}),t.validationErrors.length>0?n("el-badge",{staticStyle:{"margin-left":"5px"},attrs:{type:"danger",value:t.validationErrors.length}}):e._e()],1)})),0)])}))],2)}))],2)}))],2),n("el-col",{attrs:{span:16}},[e.selected?e._e():n("p",[n("small",[e._v("Please select data objects on the left menu.")])]),e.selected?n("div",[n("div",[n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"Hierarchy"}},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:8}},[n("el-input",{attrs:{size:"small"},on:{change:e.changeSelectedH},model:{value:e.selected_sub,callback:function(t){e.selected_sub=t},expression:"selected_sub"}},[n("template",{slot:"prepend"},[e._v("Subject")])],2)],1),n("el-col",{attrs:{span:8}},[n("el-input",{attrs:{size:"small"},on:{change:e.changeSelectedH},model:{value:e.selected_ses,callback:function(t){e.selected_ses=t},expression:"selected_ses"}},[n("template",{slot:"prepend"},[e._v("Session")])],2)],1),n("el-col",{attrs:{span:6}},[n("el-input",{attrs:{size:"small"},on:{change:e.changeSelectedH},model:{value:e.selected_run,callback:function(t){e.selected_run=t},expression:"selected_run"}},[n("template",{slot:"prepend"},[e._v("Run")])],2)],1)],1)],1)],1)],1),e._l(e.selected,(function(t,s){return n("div",{key:s,staticClass:"object"},[n("div",{staticStyle:{"margin-bottom":"10px"}},e._l(t.validationErrors,(function(e,t){return n("el-alert",{key:t,staticStyle:{"margin-bottom":"4px"},attrs:{type:"error",title:e}})})),1),n("el-form",{attrs:{"label-width":"100px"}},[n("div",{staticStyle:{float:"right"}},[n("el-checkbox",{attrs:{title:"Include this object in the BIDS output"},on:{change:function(n){return e.validateAndCheck(t)}},model:{value:t.include,callback:function(n){e.$set(t,"include",n)},expression:"o.include"}},[e._v("Include")])],1),n("br",{attrs:{clear:"both"}}),n("div",{class:{"object-exclude":!t.include}},[n("el-form-item",{staticStyle:{clear:"both"},attrs:{label:"Series"}},[e._v(" "+e._s(t.SeriesDescription)+" "),n("el-tag",{attrs:{type:"info",size:"mini"}},[n("small",[e._v(e._s(t.SeriesNumber))])])],1),n("el-form-item",{staticStyle:{clear:"both"},attrs:{label:"Datatype"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Modality",size:"small"},model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"o.type"}},e._l(e.$root.datatypes,(function(t){return n("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,(function(s){return n("el-option",{key:s.value,attrs:{value:s.value}},[e._v(" "+e._s(t.label)+" / "+e._s(s.label)+" ")])})),1)})),1)],1),t.type.startsWith("func/")?n("el-form-item",{attrs:{label:"Task Name"}},[n("el-input",{attrs:{size:"small",required:""},on:{change:function(n){return e.validateAndCheck(t)}},model:{value:t.labels.task,callback:function(n){e.$set(t.labels,"task",n)},expression:"o.labels.task"}})],1):e._e(),e._l(t.items,(function(s,o){return n("el-form-item",{key:o,attrs:{label:s.id}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Source path",size:"small"},model:{value:s.path,callback:function(t){e.$set(s,"path",t)},expression:"item.path"}},e._l(t.paths,(function(e,t){return n("el-option",{key:t,attrs:{label:e,value:e}})})),1),s.sidecar?n("div",{staticStyle:{"box-shadow":"1px 1px 3px #0002","border-radius":"5px",padding:"10px","background-color":"#fcfcfc"}},[n("b",{staticStyle:{opacity:"0.5"}},[e._v("Sidecar")]),n("kveditor",{attrs:{kv:s.sidecar}})],1):e._e()],1)}))],2)])],1)}))],2):e._e()])],1)],1)},he=[],me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{attrs:{"label-width":"200px",size:"mini"}},e._l(e.kv,(function(t,s){return n("el-form-item",{key:s,staticStyle:{margin:"2px 0"},attrs:{label:s}},[n("el-input",{model:{value:e.kv[s],callback:function(t){e.$set(e.kv,s,t)},expression:"kv[key]"}})],1)})),1)],1)},be=[],ve={props:["kv"],data:function(){return{something:"whatever"}}},ge=ve,_e=Object(g["a"])(ge,me,be,!1,null,null,null),ye=_e.exports,we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"datatype",class:{exclude:!e.o.include},staticStyle:{display:"inline-block"}},[n("span",{staticClass:"bull",style:{"background-color":e.color}}),e._v(" "+e._s(e.o.type)+" "),e._l(e.o.labels,(function(t,s){return n("el-tag",{key:s,attrs:{size:"mini",type:"info"}},[n("small",[e._v(e._s(s))]),e._v(" "),n("b",[e._v(e._s(t.toUpperCase()))])])}))],2)},xe=[],ke=(n("13d5"),n("ac1f"),n("1276"),{props:["o"],data:function(){return{something:"whatever"}},computed:{color:function(){var e=this.o.type.split("").reduce((function(e,t){return e=(e<<5)-e+t.charCodeAt(0),e&e}),0),t=Math.abs(e+12)%360;return"hsl("+t%360+", 50%, 55%)"}}}),$e=ke,Se=(n("cd95"),Object(g["a"])($e,we,xe,!1,null,"7283b6d4",null)),je=Se.exports,De={components:{kveditor:ye,datatype:je},data:function(){return{selected:null,selected_sub:"",selected_ses:"",selected_run:""}},methods:{select:function(e,t,n,s){this.selected=e,this.selected_sub=t,this.selected_ses=n,this.selected_run=s},changeSelectedH:function(){var e=this;this.selected.forEach((function(t){t.hierarchy.subject=e.selected_sub,t.hierarchy.session=e.selected_ses,t.hierarchy.run=e.selected_run})),this.$root.organizeObjects(),this.selected=this.$root.subs[this.selected_sub].sess[this.selected_ses].runs[this.selected_run].objects},validateAndCheck:function(e){this.$root.validateObject(e),this.$root.validated=this.isAllValid()},isAllValid:function(){console.log("checking valid");var e,t=Object($["a"])(this.$root.objects);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.include&&n.validationErrors.length>0)return console.log("no good"),!1}}catch(s){t.e(s)}finally{t.f()}return console.log("all good"),!0}},computed:{}},ze=De,Ie=(n("931e"),Object(g["a"])(ze,fe,he,!1,null,"4200f163",null)),Oe=Ie.exports,Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.finalizing?e._e():n("div",[n("p",[e._v("Your data is ready to be converted to BIDS.")]),n("p",[e._v("Please click the finalize button below when you are ready to convert your data to BIDS.")]),n("el-button",{attrs:{type:"primary"},on:{click:e.finalize}},[e._v("Finalize")])],1),e.finalizing?n("div",["failed"==e.$root.session.status?n("div",[n("p",[e._v("Analysis has failed.. Please check the log and/or contact ezBIDS team.")]),n("p",[e._v(e._s(e.$root.session.status_msg))])]):e._e(),"finalized"==e.$root.session.status?n("div",[n("p",[e._v("Waiting to be converted to BIDS...")])]):e._e(),"bidsing"==e.$root.session.status?n("div",[n("p",[e._v("Being Converted to BIDS...")])]):e._e(),"finished"==e.$root.session.status?n("div",[n("p",[e._v("All done!")])]):e._e()]):e._e()])},Ce=[],Ee={computed:{},components:{},data:function(){return{finalizing:!1,reload_t:null}},created:function(){},methods:{finalize:function(){var e=this;clearTimeout(this.reload_t),this.finalizing=!0,fetch(this.$root.apihost+"/session/"+this.$root.session._id+"/finalize",{method:"PATCH",body:JSON.stringify({datasetDescription:this.$root.datasetDescription,readme:this.$root.readme,participants:this.$root.participants,participantsColumn:this.$root.participantsColumn,objects:this.$root.objects})}).then((function(e){return e.text()})).then((function(t){"ok"==t?(e.$root.finalized=!0,e.pollSession()):e.$notify({title:"Failed",message:"Failed to finalize:"+t})}))},pollSession:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("polling..",e.$root.session.status),t.next=3,fetch(e.$root.apihost+"/session/"+e.$root.session._id,{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return n=t.sent,t.next=6,n.json();case 6:e.$root.session=t.sent,t.t0=e.$root.session.status,t.next="finalized"===t.t0||"bidsing"===t.t0?10:"finished"===t.t0?12:"failed"===t.t0?14:15;break;case 10:return e.reload_t=setTimeout((function(){console.log("will reload"),e.pollSession()}),1e3),t.abrupt("break",15);case 12:return e.$root.finished=!0,t.abrupt("break",15);case 14:return t.abrupt("break",15);case 15:case"end":return t.stop()}}),t)})))()}}},Pe=Ee,Re=Object(g["a"])(Pe,Ae,Ce,!1,null,"0eae6fb3",null),Ne=Re.exports,Te={components:{themenu:y,upload:N,description:M,subjects:Y,sessions:ee,series:ie,participants:pe,objects:Oe,finalize:Ne},data:function(){return{}},created:function(){console.log("App")}},qe=Te,Be=(n("034f"),Object(g["a"])(qe,p,f,!1,null,null,null)),Le=Be.exports,Fe=n("6612");o["default"].filter("formatNumber",(function(e){return Fe(e).format("0,0")})),o["default"].use(i.a,{locale:l.a}),o["default"].use(d["a"]),o["default"].config.productionTip=!1,new o["default"]({el:"#app",components:{App:Le},render:function(e){return e("App")},data:function(){return{apihost:"https://dev1.soichi.us/api/easybids",datasetDescription:{Name:"The mother of all experiments",BIDSVersion:"1.4.0",DatasetType:"raw",License:"CC0",Authors:["Paul Broca","Carl Wernicke"],Acknowledgements:"Special thanks to Korbinian Brodmann for help in formatting this dataset in BIDS. We thank Alan Lloyd Hodgkin and Andrew Huxley for helpful comments and discussions about the experiment and manuscript; Hermann Ludwig Helmholtz for administrative support; and Claudius Galenus for providing data for the medial-to-lateral index analysis.",HowToAcknowledge:"Please cite this paper: https://www.ncbi.nlm.nih.gov/pubmed/001012092119281",Funding:["National Institute of Neuroscience Grant F378236MFH1","National Institute of Neuroscience Grant 5RMZ0023106"],EthicsApprovals:["Army Human Research Protections Office (Protocol ARL-20098-10051, ARL 12-040, and ARL 12-041)"],ReferencesAndLinks:["https://www.ncbi.nlm.nih.gov/pubmed/001012092119281","http://doi.org/1920.8/jndata.2015.7"],DatasetDOI:"10.0.2.3/dfjj.10"},readme:"",participantsColumn:{},subjects:[],sessions:[],series:[],objects:[],subs:{},page:"upload",datatypes:[],uploadFailed:!1,session:null,analyzed:!1,validated:!1,finalized:!1,finished:!1}},watch:{page:function(e){var t=this;"objects"==e&&(this.objects.forEach((function(e){var n=t.subjects.find((function(t){return t.PatientID==e.PatientID}));n?e.hierarchy.subject=n.sub:console.log("unknown PatientID in object",e.PatientID);var s=t.sessions.find((function(t){return t.AcquisitionDate==e.AcquisitionDate}));s?e.hierarchy.session=s.ses:console.log("unknown AcquisitionDate in object",e.AcquisitionDate);var o=t.series.find((function(t){return t.SeriesNumber==e.SeriesNumber}));o?(e.SeriesDescription=o.SeriesDescription,e.type=o.type,e.include=o.include,Object.assign(e.labels,o.labels)):console.log("unknown seriesnumber in object",e.SeriesNumber),t.validateObject(e)})),this.organizeObjects())}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,s,o,a,i,r,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("mounted main"),n=u.a.load("\n- suffixes:\n    - dwi\n  extensions:\n    - .nii.gz\n    - .nii\n    - .json\n    - .bvec\n    - .bval\n  entities:\n    sub: required\n    ses: optional\n    acq: optional\n    dir: optional\n    run: optional\n- suffixes:\n    - sbref\n  extensions:\n    - .nii.gz\n    - .nii\n    - .json\n  entities:\n    sub: required\n    ses: optional\n    acq: optional\n    dir: optional\n    run: optional\n"),s={label:"Diffusion",options:[]},n.forEach((function(e){e.suffixes.forEach((function(e){s.options.push({value:"dwi/"+e,label:e})}))})),e.datatypes.push(s),o=u.a.load("\n# First group\n- suffixes:\n    - T1w\n    - T2w\n    - T1rho\n    - T1map\n    - T2map\n    - T2star\n    - FLAIR\n    - FLASH\n    - PD\n    - PDmap\n    - PDT2\n    - inplaneT1\n    - inplaneT2\n    - angio\n  extensions:\n    - .nii.gz\n    - .nii\n    - .json\n  entities:\n    sub: required\n    ses: optional\n    run: optional\n    acq: optional\n    ce: optional\n    rec: optional\n# Second group\n- suffixes:\n    - defacemask\n  extensions:\n    - .nii.gz\n    - .nii\n    - .json\n  entities:\n    sub: required\n    ses: optional\n    run: optional\n    acq: optional\n    ce: optional\n    rec: optional\n    mod: optional\n"),a={label:"Anatomical",options:[]},o.forEach((function(e){e.suffixes.forEach((function(e){a.options.push({value:"anat/"+e,label:e})}))})),e.datatypes.push(a),i=u.a.load("\n- suffixes:\n    - bold\n    - cbv\n    - phase\n    - sbref\n  extensions:\n    - .nii.gz\n    - .nii\n    - .json\n  entities:\n    sub: required\n    ses: optional\n    task: required\n    acq: optional\n    ce: optional\n    rec: optional\n    dir: optional\n    run: optional\n    echo: optional\n- suffixes:\n    - events\n  extensions:\n    - .tsv\n    - .json\n  entities:\n    sub: required\n    ses: optional\n    task: required\n    acq: optional\n    ce: optional\n    rec: optional\n    dir: optional\n    run: optional\n    echo: optional\n- suffixes:\n    - physio\n    - stim\n  extensions:\n    - .tsv.gz\n    - .json\n  entities:\n    sub: required\n    ses: optional\n    task: required\n    acq: optional\n    rec: optional\n    run: optional\n    recording: optional\n    proc: optional\n"),r={label:"Functional",options:[]},i.forEach((function(e){e.suffixes.forEach((function(e){r.options.push({value:"func/"+e,label:e})}))})),e.datatypes.push(r),l=u.a.load("\n- suffixes:\n    - phasediff\n    - phase1\n    - phase2\n    - magnitude1\n    - magnitude2\n    - magnitude\n    - fieldmap\n  extensions:\n    - .nii.gz\n    - .nii\n    - .json\n  entities:\n    sub: required\n    ses: optional\n    acq: optional\n    run: optional\n- suffixes:\n    - epi\n  extensions:\n    - .nii.gz\n    - .nii\n    - .json\n  entities:\n    sub: required\n    ses: optional\n    acq: optional\n    ce: optional\n    dir: required\n    run: optional\n"),c={label:"Field Map",options:[]},l.forEach((function(e){e.suffixes.forEach((function(e){c.options.push({value:"fmap/"+e,label:e})}))})),e.datatypes.push(c);case 17:case"end":return t.stop()}}),t)})))()},computed:{},methods:{reset:function(){location.reload()},validateObject:function(e){switch(o["default"].set(e,"validationErrors",[]),e.type){case"func/bold":e.hierarchy.task||e.validationErrors.push("Task Name is required for func/bold")}},organizeObjects:function(){var e=this;this.subs={},this.$root.objects.forEach((function(t){var n=t.hierarchy.subject||"",s=t.hierarchy.session||"",o=t.hierarchy.run||"";e.subs[n]||(e.subs[n]={sess:{},objects:[]}),e.subs[n].objects.push(t),e.subs[n].sess[s]||(e.subs[n].sess[s]={runs:{},objects:[]}),e.subs[n].sess[s].objects.push(t),e.subs[n].sess[s].runs[o]||(e.subs[n].sess[s].runs[o]={objects:[]}),e.subs[n].sess[s].runs[o].objects.push(t)})),this.$root.objects.sort((function(e,t){return e.hierarchy.subject>t.hierarchy.subject?1:e.hierarchy.subject<t.hierarchy.subject?-1:e.hierarchy.session>t.hierarchy.session?1:e.hierarchy.session<t.hierarchy.session?-1:e.hierarchy.run>t.hierarchy.run?1:e.hierarchy.run<t.hierarchy.run?-1:0}))},loadData:function(e){var t=this;return console.log("loadData",e),fetch(e).then((function(e){return e.json()})).then((function(e){t.subjects=e.subjects,t.sessions=e.sessions,t.series=e.series,t.objects=e.objects,t.participantsColumn=e.participantsColumn||{},t.series.forEach((function(e){e.include="true"==e.include})),t.subjects.forEach((function(e){o["default"].set(e,"phenotype",{})})),t.series.sort((function(e,t){return e.id-t.id}))})).catch((function(t){console.error("failed to load",e),console.error(t)}))}}})},"60eb":function(e,t,n){},"67e1":function(e,t,n){},"764f":function(e,t,n){},"85ec":function(e,t,n){},"8e7d":function(e,t,n){"use strict";var s=n("764f"),o=n.n(s);o.a},"931e":function(e,t,n){"use strict";var s=n("058d"),o=n.n(s);o.a},"969f":function(e,t,n){},9786:function(e,t,n){"use strict";var s=n("67e1"),o=n.n(s);o.a},cd95:function(e,t,n){"use strict";var s=n("f03b"),o=n.n(s);o.a},df1c:function(e,t,n){"use strict";var s=n("60eb"),o=n.n(s);o.a},f03b:function(e,t,n){},fc4d:function(e,t,n){"use strict";var s=n("969f"),o=n.n(s);o.a}});
//# sourceMappingURL=app.84c40c19.js.map